# EXP 1: Width vs Depth Grid Analysis
# IEEE Publication-Ready Configuration
# Goal: Systematic investigation of width and depth scaling effects on FL robustness
# Statistical Rigor: 5 random seeds, comprehensive grid search
# Expected Runtime: ~200-300 hours (3,000 experiments: 2 datasets × 4 widths × 4 depths × 3 poison levels × 5 seeds)

defaults:
  project_name: "FL_EXP1_Width_Depth_Grid"
  output_dir: "./results_exp1_{dataset}"
  load_to_memory: true
  
  # Federated Learning Configuration
  num_clients: 10                    # Standard FL setup
  fraction_fit: 1.0                  # All clients participate each round
  global_rounds: 3000                # Increased for convergence guarantee
  local_epochs: 5                    # Standard for FL literature
  batch_size: 128                    # Optimized for GPU memory
  num_parallel_workers: 1
  
  # Optimization (IEEE standard settings)
  optimizer: "sgd"
  lr: 0.01                           # Standard SGD learning rate
  momentum: 0.9                      # Nesterov momentum
  weight_decay: 5e-4                 # L2 regularization
  
  # Model Architecture
  depth: 4                           # Default depth (varied in combinations)
  
  # Validation & Early Stopping
  validation_split: 0.1              # 10% for validation
  early_stopping_patience: 20        # Increased patience for IEEE standards
  min_delta: 0.0001                  # Minimum improvement threshold

  # Poisoning Attack Configuration
  poison_type: "label_flip"
  target_class: 0
  poison_label: 1
  alpha: 100.0                       # IID data distribution
  data_ordering: "shuffle"
  aggregator: "fedavg"

# Statistical Significance: 5 independent random seeds
seeds: [42, 101, 2024, 3141, 9876]

# Comprehensive Grid Search
exp1_vary_width:
  combinations:
    - dataset: ["mnist", "cifar10"]
    - width_factor: [1, 4, 16, 64]              # Narrow to wide models
    - depth: [1, 4, 16, 64]                     # Shallow to deep models
    - poison_ratio: [0.0, 0.3, 0.5]            # Clean, moderate, severe attacks
    - aggregator: ["fedavg"]
