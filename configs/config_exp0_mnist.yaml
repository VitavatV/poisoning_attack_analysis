# EXP 0: Preliminary Study - Width vs Depth Grid
# Goal: Understand how width and depth scaling affect model capacity and robustness
# Runtime: ~60-100 hours (126 experiments)

defaults:
  project_name: "FL_EXP0_Preliminary"
  output_dir: "./results_exp0_mnist"
  load_to_memory: true
  
  # FL Settings
  num_clients: 10
  fraction_fit: 1.0
  global_rounds: 150
  local_epochs: 5
  batch_size: 64  # Reduced for 8GB VRAM compatibility
  optimizer: "sgd"
  lr: 0.01
  momentum: 0.9
  weight_decay: 5e-4
  
  # Model Architecture
  depth: 4
  
  # Early Stopping
  validation_split: 0.1
  early_stopping_patience: 20
  min_delta: 0.0001

  # Attack Defaults
  poison_type: "label_flip"
  target_class: 0
  poison_label: 1
  alpha: 100.0
  data_ordering: "shuffle"
  aggregator: "fedavg"

seeds: [42, 101, 2024]

# Grid search over width and depth
exp0_vary_width:
  dataset: "mnist"
  combinations:
    - width_factor: [32, 16, 8, 4, 2, 1]  # Limited to 32 for 8GB VRAM (was 64)
    - depth: [32, 16, 8, 4, 2, 1]  # Limited to 32 for 8GB VRAM (was 64)
    - poison_ratio: [0.0, 0.3, 0.5]
    - aggregator: ["fedavg"]
    # Note: This gives 30 combinations (was 42). Removed only extreme sizes that exceed 8GB VRAM.
