# EXP 4: IID vs NonIID
# Goal: Compare model performance under IID vs Non-IID data distributions
# Runtime: ~20-40 hours (varies by alpha values)
# Priority: HIGH - Understanding data heterogeneity impact

defaults:
  project_name: "FL_EXP4_IID_NonIID"
  output_dir: "./results_exp4_{dataset}"
  load_to_memory: true
  
  # FL Settings
  num_clients: 10
  fraction_fit: 1.0
  global_rounds: 2000
  local_epochs: 5
  batch_size: 128  # Optimized for RTX 3090 24GB VRAM
  num_parallel_workers: 1  # Let GPU handle parallelization
  optimizer: "sgd"
  lr: 0.01
  momentum: 0.9
  weight_decay: 5e-4
  
  # Model Architecture
  depth: 4
  
  # Early Stopping
  validation_split: 0.1
  early_stopping_patience: 10
  min_delta: 0.0001

  # Attack Defaults
  poison_type: "label_flip"
  target_class: 0
  poison_label: 1
  poison_ratio: 0.0
  alpha: 100.0
  data_ordering: "shuffle"
  aggregator: "fedavg"

seeds: [42, 101, 2024]

# Compare IID (alpha=100) vs various NonIID levels
exp4_iid_vs_noniid:
  combinations:
    - dataset: ["mnist", "cifar10"]
    - alpha: [100.0, 10.0, 1.0, 0.1]  # IID to highly NonIID
    - width_factor: [4]
    - poison_ratio: [0.0, 0.3, 0.5]
    - aggregator: ["fedavg"]

