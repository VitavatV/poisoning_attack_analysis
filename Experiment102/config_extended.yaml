# --- GLOBAL DEFAULTS (Inherit from main config) ---
defaults:
  project_name: "FL_Extended_Analysis"
  output_dir: "./results_extended"
  device: "cuda"
  num_clients: 10
  fraction_fit: 1.0
  global_rounds: 100
  local_epochs: 5
  optimizer: "sgd"
  lr: 0.01
  momentum: 0.9
  depth: 4
  validation_split: 0.1
  early_stopping_patience: 10
  min_delta: 0.001

  # Default Attack
  poison_type: "label_flip"
  target_class: 0
  poison_label: 1
  poison_ratio: 0.3
  alpha: 0.1 # Focus on Non-IID

# --- EXTENSION 1: DEFENSE COMPARISON ---
# เป้าหมาย: เปรียบเทียบ Intrinsic Defense (Width) vs Extrinsic Defense (Median)
# สมมติฐาน: ที่ Width ต่ำๆ Median ช่วยได้ แต่ที่ Critical Regime Median อาจเอาไม่อยู่
phase4_defense_comparison:
  dataset: "cifar10"
  combinations:
    # Compare FedAvg (None) vs FedMedian (Robust Aggregation)
    - aggregator: ["fedavg", "median"] 
    
    # Check at Critical (10) vs Robust Width (64)
    - width_factor: [10, 64]
    
    # Fix Poison
    - poison_ratio: [0.3]
    - data_ordering: "shuffle"

# --- EXTENSION 2: BATCH SIZE EFFECT (Hypothesis H3.3) ---
# เป้าหมาย: ดูว่า Batch Size เล็ก/ใหญ่ เลื่อนจุด Critical หรือไม่
phase5_batch_effect:
  dataset: "cifar10"
  combinations:
    # Vary Batch Size
    - batch_size: [32, 64, 128]
    
    # Fix Width at Critical Zone to see sensitivity
    - width_factor: [10]
    
    - poison_ratio: [0.3]
    - aggregator: "fedavg"

# --- EXTENSION 3: ATTACK TYPE (Targeted vs Random) ---
# เป้าหมาย: H4.1 - Targeted (Mis-specification) ควรทำลายล้างกว่า Random Noise
phase6_attack_type:
  dataset: "cifar10"
  combinations:
    - poison_type: ["label_flip", "random_noise"]
    - width_factor: [10, 20]
    - poison_ratio: [0.3]

    